<div class="container">

  <h1>Listing products</h1>

  <div class="row-fluid">
    <div class="row-fluid">
      <ul class="thumbnails">
        <% @products.each do |product| %>
          <li class="span4">
            <div class="thumbnail">
              <%= image_tag(product.image_url, :width => "300px", :alt => product.name)%>
              <div class="caption">
                <h3><%= product.name %></h3>
                <p>
                  <h4><%=number_to_currency(product.price)%></h4>
                  <%= link_to 'Add to Cart', nil, :class => "btn btn-primary btn-small" %>
                </p>
              </div>
            </div>
          </li>   
        <% end %>
      </ul>  
    </div>
    <div class="span3">
      <div class="well sidebar-nav">
        <h2>Cart Sidebar</h2>
        <div><% @cart_products.each do |product| %>
          <p><%= product.name %></p>
          <p><%= number_to_currency(product.price) %></p>
          <%end%>
        </div>  
        <h3>Total: </h3>
        <h3><%= number_to_currency(@cart_total) %></h3>
      </div>
    </div>
  </div>

  <p><%= @cart_products.inspect %></p>

  <table>
    <tr>
      <th>Name</th>
      <th>Image</th>
      <th>Price</th>
      <th>Description</th>
      <th>Cart?</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

  <% @products.each do |product| %>
    <tr>
      <td><%= product.name %></td>
      <td><%= image_tag(product.image_url, :width => "50px") if product.image_url%></td>
      <td><%= number_to_currency(product.price) %></td>
      <td><%= product.description %></td>
      <td><%= "Yes" if product.in_cart %></td>
      <td><%= link_to 'Show', product %></td>
      <td><%= link_to 'Edit', edit_product_path(product) %></td>
      <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </table>

  <br />

  <%= link_to 'New Product', new_product_path, :class => "btn btn-primary btn-small" %>
</div>